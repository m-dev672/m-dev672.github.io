<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>socat on Where you at?</title>
    <link>https://m-dev672.github.io/tags/socat/</link>
    <description>Recent content in socat on Where you at?</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>jp</language>
    <copyright>© 2021 Koutarou Mori</copyright>
    <lastBuildDate>Fri, 01 Jul 2022 17:26:34 +0900</lastBuildDate><atom:link href="https://m-dev672.github.io/tags/socat/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>vim-lspでリモートのLanguage Serverとお喋りする</title>
      <link>https://m-dev672.github.io/articles/vimsocat/</link>
      <pubDate>Fri, 01 Jul 2022 17:26:34 +0900</pubDate>
      
      <guid>https://m-dev672.github.io/articles/vimsocat/</guid>
      <description>前書き iPad上のiVimでLanguage Serverの恩恵を受けることが最終目標！その前段階として、この記事ではリモートのLanguage Serverとvim-lspでお喋りする。
SSHを使ってリモートのVimで作業してもいいけど、ネットワークが不安定な時に編集できなくなるのは嫌なので、ファイルはローカルにおいてLanguage Serverだけ外において、ネットワークが不安定な時に使用できなくなる機能を最低限に抑えたい。
環境     OS Vim 追加したパッケージ     リモート Ubuntu 22.04 LTS - socat, golang, gopls   ローカル Ubuntu 22.04 LTS NVIM v0.6.1 socat, neovim, curl, git     リモートもローカルもProxmoxのLXCコンテナ上で動作していて、SSHを使ってメインPCから作業を行っています。
 方法 Language Serverへ諸々情報を渡す方法は意外と単純で、stdinにJSON-RPCというプロトコルに準拠したjsonを張り付けているだけらしい。レスポンスはstdout。なので、stdioとかをリレーしてくれるsocatやncを使えばリモートでLanguage Serverとお喋りできそう。
GoとかPythonの環境はリモートに置くので、プロジェクトのファイルはローカルとリモートで共有しておく必要がありそう。
rsyncで差分だけを共有することで、細い回線でも共有しておきたい。
手順 リモートにsocatとgolang, goplsをインストール apt install socat golang gopls
goplsにJSON-RPCを流すsocatサーバーを立てる socat tcp-listen:1024,fork,reuseaddr exec:&#39;gopls&#39;
コマンドの雑解説 tcp-listen:1024 1024ポートでLISTEN ,fork,reuseaddr よくわからんけど多分1対多で通信できるようになる？ exec:&amp;lsquo;gopls&amp;rsquo; goplsを実行してstdinで通信を流してstdioを返す
ローカルにsocatとnvimをインストール vim-plugとvim-lspを入れるためにcurlとgitもインストールします。</description>
    </item>
    
  </channel>
</rss>
